window.setImmediate||function(){"use strict";function n(n){var t,r=n.data;"string"==typeof r&&0==r.indexOf(o)&&(t=e[r])&&(delete e[r],function(n){var t=n[0];switch(n.length){case 1:return t();case 2:return t(n[1]);case 3:return t(n[1],n[2])}t.apply(window,i.call(n,1))}(t))}var t=0,e={},r=!0,i=Array.prototype.slice,o="setImmediatePolyfillMessage";window.setImmediate=function(){for(var i=t++,u=o+i,c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return e[u]=f,r&&(r=!1,window.addEventListener("message",n)),window.postMessage(u,"*"),i},window.clearImmediate=function(n){delete e[o+n]}}(),function(n){"use strict";function t(n){this[y]=n}function e(n){return n instanceof t}function r(n){return"function"==typeof n}function i(n){return n instanceof d}function o(n){return n}function u(n){delete n[m],delete n[p]}function c(n){var t,e=n.length;for(t=0;t<e;t++)n[t]()}function f(n,t,r){var o=a(r);i(o)?o.then(n,t):e(o)?t(o[y]):n(r)}function a(n){var e;if(i(n))return n;if(function(n){return Object(n)===n}(n)){try{e=n.then}catch(n){return new t(n)}if(r(e))return new d(function(t,r){O(function(){try{e.call(n,t,r)}catch(n){r(n)}})})}return null}function s(n,t){var r,o=a(t);i(o)?(n[h]=g,o.then(function(t){s(n,t)},function(t){l(n,t)})):e(o)?l(n,o[y]):(n[h]=P,n[w]=t,(r=n[m])&&r.length&&(u(n),c(r)))}function l(n,t){var e=n[p];n[h]=j,n[w]=t,e&&e.length&&(u(n),c(e))}function d(n){if(!i(this))throw new TypeError(E);this[h]=v,this[w]=void 0,function(n,t){function e(t){n[h]==v&&l(n,t)}try{t(function(t){n[h]==v&&s(n,t)},e)}catch(n){e(n)}}(this,n)}var h="[[PromiseStatus]]",w="[[PromiseValue]]",m="[[OnFulfilled]]",p="[[OnRejected]]",y="[[OriginalError]]",v="pending",g="internal pending",P="fulfilled",j="rejected",E='constructor Promise requires "new".',I="then() cannot return same Promise that it resolves.",O=n.setImmediate||require("timers").setImmediate,b=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)};d.prototype.then=function(n,t){var e,i=this;return n=r(n)?n:o,t=r(t)?t:function(n){throw n},e=new d(function(r,o){function u(n){var t;try{t=n(i[w])}catch(n){return void o(n)}t===e?o(new TypeError(I)):f(r,o,t)}function c(){O(u,n)}function a(){O(u,t)}switch(i[h]){case P:c();break;case j:a();break;default:!function(n,t,e){n[m]||(n[m]=[],n[p]=[]),n[m].push(t),n[p].push(e)}(i,c,a)}})},d.prototype.catch=function(n){return this.then(o,n)},d.resolve=function(n){var t=a(n);return i(t)?t:new d(function(r,i){e(t)?i(t[y]):r(n)})},d.reject=function(n){return new d(function(t,e){e(n)})},d.race=function(n){return new d(function(t,e){var r,i;if(b(n))for(i=n.length,r=0;r<i;r++)f(t,e,n[r]);else e(new TypeError("not an array."))})},d.all=function(n){return new d(function(t,r){var o,u,c,f,s=0,l=0;if(b(n)){for(u=(n=n.slice(0)).length,f=0;f<u;f++)i(o=a(c=n[f]))?(l++,o.then(function(e){return function(r){n[e]=r,++s==l&&t(n)}}(f),r)):e(o)?r(o[y]):n[f]=c;l||t(n)}else r(new TypeError("not an array."))})},"undefined"!=typeof module&&module.exports?module.exports=n.Promise||d:n.Promise||(n.Promise=d)}(this);